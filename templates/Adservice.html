{% extends 'Admin.html' %}

{% block content %}
<div class="max-w-2xl mx-auto">
  <div class="bg-white rounded-xl shadow-lg p-8">
    <div class="text-center mb-8">
      <div class="inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4">
        <i class="fas fa-plus-circle text-2xl text-green-600"></i>
      </div>
      <h2 class="text-2xl font-bold text-gray-800">Add New Emergency Service</h2>
      <p class="text-gray-600 mt-2">Register a new emergency service for the platform</p>
    </div>

    <form action="/add-service" method="POST" onsubmit="return validateServiceForm()" novalidate class="space-y-6">

      <!-- Service Title -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          <i class="fas fa-tag mr-2 text-blue-600"></i>Service Title
        </label>
        <input type="text"
               id="serviceTitle"
               name="serviceTitle"
               class="w-full px-4 py-3 border border-gray-300 rounded-lg"
               placeholder="Enter service title"
               required>
        <span id="titleError" class="text-red-500 text-sm mt-1 block"></span>
      </div>

      <!-- Service Image -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          <i class="fas fa-image mr-2 text-purple-600"></i>Service Image URL
        </label>
        <input type="url"
               id="serviceImage"
               name="serviceImage"
               class="w-full px-4 py-3 border border-gray-300 rounded-lg"
               placeholder="https://example.com/image.jpg"
               required>
        <span id="imageError" class="text-red-500 text-sm mt-1 block"></span>
      </div>

      <!-- Helpline (NO VALIDATION) -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          <i class="fas fa-phone mr-2 text-green-600"></i>Service Helpline
        </label>
        <input type="text"
               id="helpline"
               name="helpline"
               class="w-full px-4 py-3 border border-gray-300 rounded-lg"
               placeholder="Enter helpline number"
               required>
      </div>

      <!-- First Aid -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          <i class="fas fa-first-aid mr-2 text-red-600"></i>First Aid Instructions
        </label>
        <textarea id="firstAid"
                  name="firstAid"
                  rows="4"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg"
                  placeholder="Provide first aid instructions"
                  required></textarea>
        <span id="aidError" class="text-red-500 text-sm mt-1 block"></span>
      </div>

      <div class="pt-4">
        <button type="submit"
                class="w-full bg-blue-600 text-white font-semibold py-3 rounded-lg hover:bg-blue-700">
          <i class="fas fa-save mr-2"></i>Add Emergency Service
        </button>
      </div>
    </form>
  </div>
</div>

<script>
function validateServiceForm() {
  let isValid = true;

  document.querySelectorAll('span[id$="Error"]').forEach(
    span => span.textContent = ''
  );

  const title = document.getElementById("serviceTitle").value.trim();
  const image = document.getElementById("serviceImage").value.trim();
  const firstAid = document.getElementById("firstAid").value.trim();

  const urlPattern = /^https?:\/\/.+\.(jpg|jpeg|png|gif|webp)$/i;

  if (title.length < 3) {
    document.getElementById("titleError").textContent =
      "Service title must be at least 3 characters.";
    isValid = false;
  }

  if (!urlPattern.test(image)) {
    document.getElementById("imageError").textContent =
      "Please enter a valid image URL.";
    isValid = false;
  }

  if (firstAid.length < 10) {
    document.getElementById("aidError").textContent =
      "First aid instructions must be at least 10 characters.";
    isValid = false;
  }

  return isValid;
}
</script>

{% endblock %}
